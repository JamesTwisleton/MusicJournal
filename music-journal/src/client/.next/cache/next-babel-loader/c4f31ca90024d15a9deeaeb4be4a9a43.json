{"ast":null,"code":"var _jsxFileName = \"/mnt/c/Users/ajtwi/git/MusicJournal/music-journal/components/RecentTracks.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useEffect, useState } from 'react';\nimport { Row, Col, Carousel } from 'react-bootstrap/';\nimport { NavigationBar } from '../components/NavigationBar'; //TODO: Move to services\n\nconst fetcher = url => fetch(url, {\n  method: 'GET'\n}).then(res => res.json());\n\nconst RecentTracks = ({\n  firebaseToken\n}) => {\n  const {\n    0: carouselIndex,\n    1: setCarouselIndex\n  } = useState(0);\n  const {\n    0: recentTracks,\n    1: setRecentTracks\n  } = useState([]);\n  const {\n    0: scaleDirection,\n    1: setScaleDirection\n  } = useState(1);\n  const {\n    0: scaleRatio,\n    1: setScaleRatio\n  } = useState(0);\n  useEffect(() => {\n    setTimeout(() => console.log('Hello, World!'), 3000);\n    setInterval(() => {\n      if (scaleRatio > .2) {\n        setScaleDirection(-1);\n      }\n\n      if (scaleRatio < 0) {\n        setScaleDirection(1);\n      }\n\n      setScaleRatio(scaleRatio + .00009 * scaleDirection);\n      console.log(scaleRatio);\n    }, 10);\n    fetcher('/api/recent-tracks-from-spotify').then(json => {\n      setRecentTracks(json);\n    });\n  }, []);\n\n  const moveCarousel = index => {\n    let nextIndex = carouselIndex + index;\n\n    if (nextIndex < 0) {\n      nextIndex = recentTracks.length - 1;\n    }\n\n    setCarouselIndex(nextIndex % recentTracks.length);\n    console.log(carouselIndex);\n  };\n\n  return __jsx(\"div\", {\n    style: {\n      overflowX: 'hidden',\n      overflowY: 'hidden'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: \"backgroundDiv\",\n    style: recentTracks.length > 0 ? {\n      background: `url(${recentTracks[carouselIndex].image.url}) center center/cover no-repeat fixed`,\n      transform: `scale(${1 + scaleRatio}, ${1 + scaleRatio})`,\n      height: '100vh'\n    } : {},\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    style: {\n      height: '100%',\n      width: '100%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 17\n    }\n  }, __jsx(\"div\", {\n    style: {\n      height: '100%',\n      float: 'left',\n      width: '50%'\n    },\n    onClick: () => moveCarousel(-1),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 21\n    }\n  }), __jsx(\"div\", {\n    style: {\n      height: '100%',\n      float: 'left',\n      width: '50%'\n    },\n    onClick: () => moveCarousel(1),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 21\n    }\n  }))), __jsx(\"p\", {\n    style: {\n      background: 'black',\n      color: 'white',\n      fontSize: '50px',\n      textAlign: 'center',\n      opacity: '.8',\n      position: 'absolute',\n      bottom: '0'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 13\n    }\n  }, recentTracks.length > 0 ? recentTracks[carouselIndex].description : ''));\n};\n\nRecentTracks.getInitialProps = async ctx => {\n  const {\n    firebaseToken\n  } = cookies(ctx);\n\n  if (!firebaseToken) {\n    return {};\n  }\n\n  return {\n    firebaseToken\n  };\n};\n\nexport default RecentTracks;","map":{"version":3,"sources":["/mnt/c/Users/ajtwi/git/MusicJournal/music-journal/components/RecentTracks.js"],"names":["useEffect","useState","Row","Col","Carousel","NavigationBar","fetcher","url","fetch","method","then","res","json","RecentTracks","firebaseToken","carouselIndex","setCarouselIndex","recentTracks","setRecentTracks","scaleDirection","setScaleDirection","scaleRatio","setScaleRatio","setTimeout","console","log","setInterval","moveCarousel","index","nextIndex","length","overflowX","overflowY","background","image","transform","height","width","float","color","fontSize","textAlign","opacity","position","bottom","description","getInitialProps","ctx","cookies"],"mappings":"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","sourcesContent":["import { useEffect, useState } from 'react';\nimport { Row, Col, Carousel } from 'react-bootstrap/';\nimport { NavigationBar } from '../components/NavigationBar';\n\n//TODO: Move to services\nconst fetcher = (url) =>\n    fetch(url, {\n        method: 'GET',\n    }).then((res) => res.json());\n\n\nconst RecentTracks = ({ firebaseToken }) => {\n    const [carouselIndex, setCarouselIndex] = useState(0);\n    const [recentTracks, setRecentTracks] = useState([]);\n    const [scaleDirection, setScaleDirection] = useState(1);\n    const [scaleRatio, setScaleRatio] = useState(0);\n\n    useEffect(() => {\n        setTimeout(() => console.log('Hello, World!'), 3000);\n        setInterval(() => {\n            if (scaleRatio > .2) {\n                setScaleDirection(-1)\n            }\n            if (scaleRatio < 0) {\n                setScaleDirection(1)\n            }\n            setScaleRatio(scaleRatio + (.00009 * scaleDirection));\n            console.log(scaleRatio)\n        }, 10);\n\n        fetcher('/api/recent-tracks-from-spotify').then((json) => {\n            setRecentTracks(json);\n        });\n    }, [])\n\n    const moveCarousel = (index) => {\n        let nextIndex = carouselIndex + index\n\n        if(nextIndex < 0) {\n            nextIndex = recentTracks.length - 1\n        }\n\n        setCarouselIndex(nextIndex % recentTracks.length);\n        console.log(carouselIndex);\n    }\n\n    return (\n        <div style={{overflowX: 'hidden',overflowY: 'hidden'}}>\n            <div\n                className=\"backgroundDiv\"\n                style={recentTracks.length > 0 ? {\n                    background: `url(${recentTracks[carouselIndex].image.url}) center center/cover no-repeat fixed`,\n                    transform: `scale(${ 1 + scaleRatio}, ${ 1 + scaleRatio })`,\n                    height: '100vh'\n                } : {}}>\n                <div  style={{ height: '100%', width: '100%' }}>\n                    <div \n                        style={{ height: '100%', float: 'left', width: '50%' }} \n                        onClick={() => moveCarousel(-1)} \n                    />\n                    <div \n                        style={{  height: '100%', float: 'left', width: '50%' }} \n                        onClick={() => moveCarousel(1)} \n                    />\n                </div>\n            </div>\n            \n            <p style={{\n                background: 'black',\n                color: 'white',\n                fontSize: '50px',\n                textAlign: 'center',\n                opacity: '.8',\n                position: 'absolute',\n                bottom: '0'\n            }}>\n                {recentTracks.length > 0 ? recentTracks[carouselIndex].description : ''}\n            </p>\n        </div>\n    )\n}\n\nRecentTracks.getInitialProps = async (ctx) => {\n    const { firebaseToken } = cookies(ctx);\n    if (!firebaseToken) {\n        return {}\n    }\n    return { firebaseToken };\n}\n\nexport default RecentTracks;\n"]},"metadata":{},"sourceType":"module"}