{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _this = this,\n    _jsxFileName = \"/mnt/c/Users/ajtwi/git/MusicJournal/music-journal/components/RecentTracks.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useEffect, useState } from 'react';\nimport { Row, Col, Carousel } from 'react-bootstrap/';\nimport { NavigationBar } from '../components/NavigationBar'; //TODO: Move to services\n\nvar fetcher = function fetcher(url) {\n  return fetch(url, {\n    method: 'GET'\n  }).then(function (res) {\n    return res.json();\n  });\n};\n\nvar RecentTracks = function RecentTracks(_ref) {\n  _s();\n\n  var firebaseToken = _ref.firebaseToken;\n\n  var _useState = useState(0),\n      carouselIndex = _useState[0],\n      setCarouselIndex = _useState[1];\n\n  var _useState2 = useState([]),\n      recentTracks = _useState2[0],\n      setRecentTracks = _useState2[1];\n\n  var _useState3 = useState(1),\n      scaleDirection = _useState3[0],\n      setScaleDirection = _useState3[1];\n\n  var _useState4 = useState(0),\n      scaleRatio = _useState4[0],\n      setScaleRatio = _useState4[1];\n\n  useEffect(function () {\n    setTimeout(function () {\n      return console.log('Hello, World!');\n    }, 3000);\n    setInterval(function () {\n      if (scaleRatio > .2) {\n        setScaleDirection(-1);\n      }\n\n      if (scaleRatio < 0) {\n        setScaleDirection(1);\n      }\n\n      setScaleRatio(scaleRatio + .00009 * scaleDirection);\n      console.log(scaleRatio);\n    }, 10);\n    fetcher('/api/recent-tracks-from-spotify').then(function (json) {\n      setRecentTracks(json);\n    });\n  }, []);\n\n  var moveCarousel = function moveCarousel(index) {\n    var nextIndex = carouselIndex + index;\n\n    if (nextIndex < 0) {\n      nextIndex = recentTracks.length - 1;\n    }\n\n    setCarouselIndex(nextIndex % recentTracks.length);\n    console.log(carouselIndex);\n  };\n\n  return __jsx(\"div\", {\n    style: {\n      overflowX: 'hidden',\n      overflowY: 'hidden'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: \"backgroundDiv\",\n    style: recentTracks.length > 0 ? {\n      background: \"url(\".concat(recentTracks[carouselIndex].image.url, \") center center/cover no-repeat fixed\"),\n      transform: \"scale(\".concat(1 + scaleRatio, \", \").concat(1 + scaleRatio, \")\"),\n      height: '100vh'\n    } : {},\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    style: {\n      height: '100%',\n      width: '100%'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 17\n    }\n  }, __jsx(\"div\", {\n    style: {\n      height: '100%',\n      \"float\": 'left',\n      width: '50%'\n    },\n    onClick: function onClick() {\n      return moveCarousel(-1);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 21\n    }\n  }), __jsx(\"div\", {\n    style: {\n      height: '100%',\n      \"float\": 'left',\n      width: '50%'\n    },\n    onClick: function onClick() {\n      return moveCarousel(1);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 21\n    }\n  }))), __jsx(\"p\", {\n    style: {\n      background: 'black',\n      color: 'white',\n      fontSize: '50px',\n      textAlign: 'center',\n      opacity: '.8',\n      position: 'absolute',\n      bottom: '0'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 13\n    }\n  }, recentTracks.length > 0 ? recentTracks[carouselIndex].description : ''));\n};\n\n_s(RecentTracks, \"ttCvgr8QlvQfRC5S/mRDAS3/wR8=\");\n\n_c = RecentTracks;\n\nRecentTracks.getInitialProps = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(ctx) {\n    var _cookies, firebaseToken;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _cookies = cookies(ctx), firebaseToken = _cookies.firebaseToken;\n\n            if (firebaseToken) {\n              _context.next = 3;\n              break;\n            }\n\n            return _context.abrupt(\"return\", {});\n\n          case 3:\n            return _context.abrupt(\"return\", {\n              firebaseToken: firebaseToken\n            });\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function (_x) {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\nexport default RecentTracks;\n\nvar _c;\n\n$RefreshReg$(_c, \"RecentTracks\");","map":{"version":3,"sources":["/mnt/c/Users/ajtwi/git/MusicJournal/music-journal/components/RecentTracks.js"],"names":["useEffect","useState","Row","Col","Carousel","NavigationBar","fetcher","url","fetch","method","then","res","json","RecentTracks","firebaseToken","carouselIndex","setCarouselIndex","recentTracks","setRecentTracks","scaleDirection","setScaleDirection","scaleRatio","setScaleRatio","setTimeout","console","log","setInterval","moveCarousel","index","nextIndex","length","overflowX","overflowY","background","image","transform","height","width","color","fontSize","textAlign","opacity","position","bottom","description","getInitialProps","ctx","cookies"],"mappings":"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","sourcesContent":["import { useEffect, useState } from 'react';\nimport { Row, Col, Carousel } from 'react-bootstrap/';\nimport { NavigationBar } from '../components/NavigationBar';\n\n//TODO: Move to services\nconst fetcher = (url) =>\n    fetch(url, {\n        method: 'GET',\n    }).then((res) => res.json());\n\n\nconst RecentTracks = ({ firebaseToken }) => {\n    const [carouselIndex, setCarouselIndex] = useState(0);\n    const [recentTracks, setRecentTracks] = useState([]);\n    const [scaleDirection, setScaleDirection] = useState(1);\n    const [scaleRatio, setScaleRatio] = useState(0);\n\n    useEffect(() => {\n        setTimeout(() => console.log('Hello, World!'), 3000);\n        setInterval(() => {\n            if (scaleRatio > .2) {\n                setScaleDirection(-1)\n            }\n            if (scaleRatio < 0) {\n                setScaleDirection(1)\n            }\n            setScaleRatio(scaleRatio + (.00009 * scaleDirection));\n            console.log(scaleRatio)\n        }, 10);\n\n        fetcher('/api/recent-tracks-from-spotify').then((json) => {\n            setRecentTracks(json);\n        });\n    }, [])\n\n    const moveCarousel = (index) => {\n        let nextIndex = carouselIndex + index\n\n        if(nextIndex < 0) {\n            nextIndex = recentTracks.length - 1\n        }\n\n        setCarouselIndex(nextIndex % recentTracks.length);\n        console.log(carouselIndex);\n    }\n\n    return (\n        <div style={{overflowX: 'hidden',overflowY: 'hidden'}}>\n            <div\n                className=\"backgroundDiv\"\n                style={recentTracks.length > 0 ? {\n                    background: `url(${recentTracks[carouselIndex].image.url}) center center/cover no-repeat fixed`,\n                    transform: `scale(${ 1 + scaleRatio}, ${ 1 + scaleRatio })`,\n                    height: '100vh'\n                } : {}}>\n                <div  style={{ height: '100%', width: '100%' }}>\n                    <div \n                        style={{ height: '100%', float: 'left', width: '50%' }} \n                        onClick={() => moveCarousel(-1)} \n                    />\n                    <div \n                        style={{  height: '100%', float: 'left', width: '50%' }} \n                        onClick={() => moveCarousel(1)} \n                    />\n                </div>\n            </div>\n            \n            <p style={{\n                background: 'black',\n                color: 'white',\n                fontSize: '50px',\n                textAlign: 'center',\n                opacity: '.8',\n                position: 'absolute',\n                bottom: '0'\n            }}>\n                {recentTracks.length > 0 ? recentTracks[carouselIndex].description : ''}\n            </p>\n        </div>\n    )\n}\n\nRecentTracks.getInitialProps = async (ctx) => {\n    const { firebaseToken } = cookies(ctx);\n    if (!firebaseToken) {\n        return {}\n    }\n    return { firebaseToken };\n}\n\nexport default RecentTracks;\n"]},"metadata":{},"sourceType":"module"}