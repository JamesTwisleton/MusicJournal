{"ast":null,"code":"export default async function handler(req, res) {\n  const firebaseAdmin = require('firebase-admin');\n\n  const firebase = require('firebase');\n\n  const serviceAccount = require('../../service-account.json');\n\n  if (!firebaseAdmin.apps.length) {\n    firebaseAdmin.initializeApp({\n      credential: firebaseAdmin.credential.cert(serviceAccount),\n      databaseURL: process.env.FIREBASE_DATABASE_URL\n    });\n  }\n\n  const user = await firebase.auth().currentUser;\n\n  if (!user) {\n    res.status(403).json({\n      authenticated: false\n    });\n  }\n\n  const ref = await firebaseAdmin.database().ref(`/memory/${user.uid}`);\n  await ref.orderByValue().once(\"value\", snapshot => {\n    let memories = [];\n    snapshot.forEach(data => {\n      memories.push(data.val());\n    });\n    res.send(memories);\n  });\n}","map":null,"metadata":{},"sourceType":"module"}